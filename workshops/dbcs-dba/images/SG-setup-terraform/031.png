Update January 22, 2018

# Setup

This workshop requires several setups steps that are normally done in advance as part of an automated process prior to running the labs.  In cases where a customer wishes to run through the workshop themselves on their own without the support of Global Services Engineering (GSE) they must first walk through the following steps.  

### **STEP 1**: Install Terraform and the Oracle Terraform OCI-Provider.

-	Download and install Terraform.  You have options for where you want to install it.  For the purposes of documenting the instructions we will use d:\tf directory.
```
https://www.terraform.io/downloads.html
```
 
 -	Download and install the Oracle 
```
https://github.com/oracle/terraform-provider-oci/releases
```

-	Copy the Terraform configuration files into your working directory.  The directory should look like this, with the terraform and oci provider and configuration files all on one directory.

	![](images/SG-setup-terraform/001.png)

### **STEP 2**: Generate SSH Key Pair on Windows Putty

-	Create a keys sub directory in your terraform directory.

	![](images/SG-setup-terraform/002.png)

-	Open Puttygen (available from the internet) and select generate a new key pair.

	![](images/SG-setup-terraform/011.png)

-	Then save the public key to your keys directory.

	![](images/SG-setup-terraform/012.png)

-	Name it publicKey for future reference.

	![](images/SG-setup-terraform/013.png)

-	Then save private key to your keys directory

	![](images/SG-setup-terraform/014.png)

-	Save it without a passphrase.

	![](images/SG-setup-terraform/015.png)

-	Name it `privateKey.ppk` for future reference.

	![](images/SG-setup-terraform/016.png)

-	Next export OpenSSH key for use on the Linux Image later in the labs.  In puttygen go to Conversions.

	![](images/SG-setup-terraform/016.1.png)

	![](images/SG-setup-terraform/016.2.png)

-	Name the key `privateKey`.  Note this version will NOT have the .ppk suffix that the private key you saved above.

	![](images/SG-setup-terraform/016.3.png)

### **STEP 3**: Generate Open SSL Key Pair on Windows

-	Download a Open SSL key generation program from the internet.  There are various sites.  The following can be used.
```
https://indy.fulgan.com/SSL/
```

-	Assuming you chose to use this key generation program (you can use your own), generate a private key.  Double click on the OpenSSL.exe file and then enter the following.  You will have to enter a pass phrase (make one up, at least four digits long).
```
genrsa -des3 -out oci_api_key.pem 2048
```
![](images/SG-setup-terraform/016.4.png)

![](images/SG-setup-terraform/016.5.png)

-	Generate the public key.  Enter the following
```
rsa -in oci_api_key.pem -outform PEM -pubout -out oci_api_key_public.pem
```
![](images/SG-setup-terraform/016.6.png)

-	Copy the pem keys from the OpenSSL directory to your /keys directory.  You should have five keys in the keys directory now: public and private OpenSSL pem keys, a public and private SSH key, and a private ppk Windows compatible key.

![](images/SG-setup-terraform/016.7.png)

![](images/SG-setup-terraform/016.8.png)

### **STEP 4**: Download the Oracle Backup Module, the Adobe Yum Repository, and the public yum ol6 repository to your Terraform directory (we are using D:\tf).

-	Go to the following site to download opc_installer.zip and save to your local download location:  `http://www.oracle.com/technetwork/database/availability/oracle-cloud-backup-2162729.html`

	![](images/SG-setup-terraform/025.png)

	![](images/SG-setup-terraform/026.png)

-	Go to the following site and download the adobe repository: `https://get.adobe.com/flashplayer/`.  Do not select the default - select download for a different operating system (Linux 64 bit).

	![](images/SG-setup-terraform/027.png)

-	Select the version YUM.

	![](images/SG-setup-terraform/028.png)

	![](images/SG-setup-terraform/029.png)

-	Go to `https://public-yum.oracle.com/public-yum-ol6.repo` and save the page results to your download directory.  

	![](images/SG-setup-terraform/029.1.png)

-	Then save to your download directory.  Name the file `public-yum-ol6.repo`.

	![](images/SG-setup-terraform/029.2.png)

### **STEP 5**: Update the env-var.bat (environment variables) with your Cloud Account credentials and identifiers. 

-	Log into the cloud.

    ![](images/SG-setup-terraform/003.png)

-   Select Customized Dashboard to make Database Services visible.

    ![](images/SG-setup-terraform/031.png)

-   Scroll down to Data Management and select `Database (OCI)` (not `Database`).