{"paragraphs":[{"text":"%md\n# xtra tutorial: Working with Oracle Data Visualization Desktop and Hive\n\nThis tutorial was built for BDCS-CE version 17.3.5-20 as part of the New Data Lake User Journey: <a href=\"https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake\" target=\"_blank\">here</a>.  Questions and feedback about the tutorial: <david.bayard@oracle.com>\n\n\n    Note: This tutorial assumes you have tables defined in the Hive metastore which you should have if you ran the earlier tutorials.\n\nOracle Data Visualization Desktop ( <a href=\"https://docs.oracle.com/middleware/bidv1221/desktop/index.html\" target=\"_blank\">here</a> ) is a lightweight, single-file download tool to easily analyze data.  Data Visualization Desktop can connect to a variety of data sources.  In this tutorial, we will show you how you can connect DV Desktop to the HiveServer2 process in BDCS-CE.\n\n","user":"anonymous","dateUpdated":"2017-09-11T18:16:35+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>xtra tutorial: Working with Oracle Data Visualization Desktop and Hive</h1>\n<p>This tutorial was built for BDCS-CE version 17.3.5-20 as part of the New Data Lake User Journey: <a href=\"https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake\" target=\"_blank\">here</a>. Questions and feedback about the tutorial: <a href=\"mailto:davi&#x64;&#46;&#98;a&#121;a&#114;&#100;&#x40;&#111;&#114;&#x61;&#x63;&#x6c;&#101;&#46;&#99;&#111;&#x6d;\">davi&#x64;&#46;&#98;a&#121;a&#114;&#100;&#x40;&#111;&#114;&#x61;&#x63;&#x6c;&#101;&#46;&#99;&#111;&#x6d;</a></p>\n<pre><code>Note: This tutorial assumes you have tables defined in the Hive metastore which you should have if you ran the earlier tutorials.\n</code></pre>\n<p>Oracle Data Visualization Desktop ( <a href=\"https://docs.oracle.com/middleware/bidv1221/desktop/index.html\" target=\"_blank\">here</a> ) is a lightweight, single-file download tool to easily analyze data. Data Visualization Desktop can connect to a variety of data sources. In this tutorial, we will show you how you can connect DV Desktop to the HiveServer2 process in BDCS-CE.</p>\n</div>"}]},"apps":[],"jobName":"paragraph_1504646601804_1812661501","id":"20170504-171842_974565851","dateCreated":"2017-09-05T21:23:21+0000","dateStarted":"2017-09-11T18:16:35+0000","dateFinished":"2017-09-11T18:16:35+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:320"},{"text":"%md\n# Download Oracle Data Visualization Desktop\n\nDownload DV Desktop from <a href=\"http://www.oracle.com/technetwork/middleware/oracle-data-visualization/index.html\" target=\"_blank\">here</a>\n\nThis tutorial is based on DVD version 12.2.3.0.0 - June 2017 Update.  You need to be at least on this version.\n\n\n![DVDownload](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/snap0012145.jpg \"DVDownload\")\n\n\n","user":"anonymous","dateUpdated":"2017-09-10T21:16:19+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Download Oracle Data Visualization Desktop</h1>\n<p>Download DV Desktop from <a href=\"http://www.oracle.com/technetwork/middleware/oracle-data-visualization/index.html\" target=\"_blank\">here</a></p>\n<p>This tutorial is based on DVD version 12.2.3.0.0 - June 2017 Update. You need to be at least on this version.</p>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/snap0012145.jpg\" alt=\"DVDownload\" title=\"DVDownload\" /></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1504646601805_1812276752","id":"20170501-162459_1108177652","dateCreated":"2017-09-05T21:23:21+0000","dateStarted":"2017-09-10T21:16:19+0000","dateFinished":"2017-09-10T21:16:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:321"},{"text":"%md\n# Extract the DV Desktop zip file and run the DVDesktop.msi\n\n+ Unzip the file you downloaded to extract the .msi file, and then launch the .msi file.\n![DVInstall](https://gse00010212.storage.oraclecloud.com/v1/Storage-gse00010212/images/snap0011606.jpg \"DVInstall\")\n\n+ Follow the prompts to install DV Desktop\n\n+ When the install is done, click Finish\n![DVInstall2](https://gse00010212.storage.oraclecloud.com/v1/Storage-gse00010212/images/snap0011607.jpg \"DVInstall2\")\n\n+ DV Desktop will launch\n![DVInstall3](https://gse00010212.storage.oraclecloud.com/v1/Storage-gse00010212/images/snap0011608.jpg \"DVInstall3\")","dateUpdated":"2017-09-05T21:23:21+0000","config":{"tableHide":false,"editorSetting":{"editOnDblClick":"true","language":"markdown"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":[{"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}}}],"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Extract the DV Desktop zip file and run the DVDesktop.msi</h1>\n<ul>\n  <li>\n  <p>Unzip the file you downloaded to extract the .msi file, and then launch the .msi file.<br/><img src=\"https://gse00010212.storage.oraclecloud.com/v1/Storage-gse00010212/images/snap0011606.jpg\" alt=\"DVInstall\" title=\"DVInstall\" /></p></li>\n  <li>\n  <p>Follow the prompts to install DV Desktop</p></li>\n  <li>\n  <p>When the install is done, click Finish<br/><img src=\"https://gse00010212.storage.oraclecloud.com/v1/Storage-gse00010212/images/snap0011607.jpg\" alt=\"DVInstall2\" title=\"DVInstall2\" /></p></li>\n  <li>\n  <p>DV Desktop will launch<br/><img src=\"https://gse00010212.storage.oraclecloud.com/v1/Storage-gse00010212/images/snap0011608.jpg\" alt=\"DVInstall3\" title=\"DVInstall3\" /></p></li>\n</ul>\n</div>"}]},"apps":[],"jobName":"paragraph_1504646601805_1812276752","id":"20170501-162605_2114505553","dateCreated":"2017-09-05T21:23:21+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:322"},{"text":"%md\n# Configuring the HiveServer2 process to use binary transport\n\nIn order to connect to Hive from DVD, we need to configure BDCS-CE's Hive Thrift Server to use the binary transport protocol.  By default, BDCS-CE's hive thrift server is configured to use the http transport protocol.  These changes are done using the Ambari web console.\n\nHere are the steps:\n\n1.Follow the note \"xtra Connecting to Ambari\" to login to Ambari.\n2.Once connected to Ambari, click on \"Hive\" on the left-hand list of services\n3.Then click on the \"Configs\" tab\n4.In the search box, type \"server2\"\n5.Click on the Advanced sub-tab\n6.In the General section, change the \"HiveServer2 Port\" to 10002 (it defaults to 10000, but that port will already be in use for something else)\n7.Also in the General section, change the \"hive.server2.transport.mode\" to binary.\n8.Click save\n9.In the notes field, enter \"transport mode\"\n10.Click save again\n11.If you see a \"Configurations\" pop-up, click \"Proceed Anyway\"\n12.Click OK to acknowledge that changes were made successfully\n13.Then click Restart, then Restart All Affected\n14.Then click Confirm Restart All\n\n![AmbariHiveBinary](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/AmbariHiveBinary.gif)\n\n","user":"anonymous","dateUpdated":"2017-09-11T18:17:00+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Configuring the HiveServer2 process to use binary transport</h1>\n<p>In order to connect to Hive from DVD, we need to configure BDCS-CE&rsquo;s Hive Thrift Server to use the binary transport protocol. By default, BDCS-CE&rsquo;s hive thrift server is configured to use the http transport protocol. These changes are done using the Ambari web console.</p>\n<p>Here are the steps:</p>\n<p>1.Follow the note &ldquo;xtra Connecting to Ambari&rdquo; to login to Ambari.<br/>2.Once connected to Ambari, click on &ldquo;Hive&rdquo; on the left-hand list of services<br/>3.Then click on the &ldquo;Configs&rdquo; tab<br/>4.In the search box, type &ldquo;server2&rdquo;<br/>5.Click on the Advanced sub-tab<br/>6.In the General section, change the &ldquo;HiveServer2 Port&rdquo; to 10002 (it defaults to 10000, but that port will already be in use for something else)<br/>7.Also in the General section, change the &ldquo;hive.server2.transport.mode&rdquo; to binary.<br/>8.Click save<br/>9.In the notes field, enter &ldquo;transport mode&rdquo;<br/>10.Click save again<br/>11.If you see a &ldquo;Configurations&rdquo; pop-up, click &ldquo;Proceed Anyway&rdquo;<br/>12.Click OK to acknowledge that changes were made successfully<br/>13.Then click Restart, then Restart All Affected<br/>14.Then click Confirm Restart All</p>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/AmbariHiveBinary.gif\" alt=\"AmbariHiveBinary\" /></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1505078507956_2030057768","id":"20170910-212147_1316147767","dateCreated":"2017-09-10T21:21:47+0000","dateStarted":"2017-09-11T18:17:00+0000","dateFinished":"2017-09-11T18:17:00+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:323"},{"text":"%md\n# Connecting to the HiveServer2 port\n\nNow, you need to decide how you want to connect to the Hive Thrift Server port, which you set to port 10002.  You can either choose to use a SSH tunnel (which is very secure) or choose to open port 10002 to the outside world (which can be less secure).\n\n+ If you want to use a SSH tunnel, refer to the note \"xtra Connecting to Ambari\" which has an example of setting up a SSH tunnel (but you would use port 10002 instead of Ambari's 8080).\n++ NOTE: By default, HiveServer2 is only listening on the internal IP address as defined by the property \"hive.server2.thrift.bind.host\".  You need to use the internal IP address or hostname listed in \"hive.server2.thrift.bind.host\" when creating the tunnel.  Or delete the property via Ambari.\n+ If you want to open up port 10002, you will need to create a new access rule for port 10002.  Refer to the note \"xtra Connecting via SSH\" or \"OEHCS Tutorial 1\" for examples of working with network access rules.\n\n","user":"anonymous","dateUpdated":"2017-09-11T18:56:32+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Connecting to the HiveServer2 port</h1>\n<p>Now, you need to decide how you want to connect to the Hive Thrift Server port, which you set to port 10002. You can either choose to use a SSH tunnel (which is very secure) or choose to open port 10002 to the outside world (which can be less secure).</p>\n<ul>\n  <li>If you want to use a SSH tunnel, refer to the note &ldquo;xtra Connecting to Ambari&rdquo; which has an example of setting up a SSH tunnel (but you would use port 10002 instead of Ambari&rsquo;s 8080).<br/>++ NOTE: By default, HiveServer2 is only listening on the internal IP address as defined by the property &ldquo;hive.server2.thrift.bind.host&rdquo;. You need to use the internal IP address or hostname listed in &ldquo;hive.server2.thrift.bind.host&rdquo; when creating the tunnel. Or delete the property via Ambari.</li>\n  <li>If you want to open up port 10002, you will need to create a new access rule for port 10002. Refer to the note &ldquo;xtra Connecting via SSH&rdquo; or &ldquo;OEHCS Tutorial 1&rdquo; for examples of working with network access rules.</li>\n</ul>\n</div>"}]},"apps":[],"jobName":"paragraph_1505079057630_224609612","id":"20170910-213057_586545895","dateCreated":"2017-09-10T21:30:57+0000","dateStarted":"2017-09-11T18:56:32+0000","dateFinished":"2017-09-11T18:56:32+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:324"},{"text":"%md\n# Define a connection in DV Desktop for the Hive connection\n\n+ Open up DV Desktop\n+ Click on Data Sources\n+ Click on Connection (Under Create)\n+ Click on Hive\n+ Enter the Connection Name\n+ Enter the Hostname.  If you chose to use SSH tunneling, enter \"127.0.0.1\" for the hostname.  If you chose to open port 10002 to the outside, enter the hostname or ip address of your BDCS-CE server.\n+ Enter to port, which is 10002\n+ Set the Username to the admin username you use to sign-in to your BDCSCE cluster/notebook (the default username is bdcsce_admin)\n+ Set the Password to the admin password you use to sign-in to your BDCSCE cluster\n\n![DVDconnection](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/DVDconnection.gif \"HODBC\")\n\n\n\n\n","user":"anonymous","dateUpdated":"2017-09-10T22:05:28+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":false,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Define a connection in DV Desktop for the Hive connection</h1>\n<ul>\n  <li>Open up DV Desktop</li>\n  <li>Click on Data Sources</li>\n  <li>Click on Connection (Under Create)</li>\n  <li>Click on Hive</li>\n  <li>Enter the Connection Name</li>\n  <li>Enter the Hostname. If you chose to use SSH tunneling, enter &ldquo;127.0.0.1&rdquo; for the hostname. If you chose to open port 10002 to the outside, enter the hostname or ip address of your BDCS-CE server.</li>\n  <li>Enter to port, which is 10002</li>\n  <li>Set the Username to the admin username you use to sign-in to your BDCSCE cluster/notebook (the default username is bdcsce_admin)</li>\n  <li>Set the Password to the admin password you use to sign-in to your BDCSCE cluster</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/DVDconnection.gif\" alt=\"DVDconnection\" title=\"HODBC\" /></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1504646601806_1813430998","id":"20170728-174228_1743240708","dateCreated":"2017-09-05T21:23:21+0000","dateStarted":"2017-09-10T21:36:41+0000","dateFinished":"2017-09-10T21:36:41+0000","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:325"},{"text":"%md\n# Create a DV Desktop Data Source for your connection\n\n+ Invoke the pop-up menu on your new Data Source and choose Create Data Source\n+ Navigate through the database, tables, and columns to choose the elements you want to add.\n+ Name the new data source and Add it\n\n![DVDdatasource](https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/DVDdatasource.gif \"HODBC\")\n","dateUpdated":"2017-09-05T21:23:21+0000","config":{"tableHide":false,"editorSetting":{"language":"markdown","editOnDblClick":"true"},"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"results":{},"enabled":true},"settings":{"params":{},"forms":{}},"results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Create a DV Desktop Data Source for your connection</h1>\n<ul>\n  <li>Invoke the pop-up menu on your new Data Source and choose Create Data Source</li>\n  <li>Navigate through the database, tables, and columns to choose the elements you want to add.</li>\n  <li>Name the new data source and Add it</li>\n</ul>\n<p><img src=\"https://raw.githubusercontent.com/oracle/learning-library/master/workshops/journey2-new-data-lake/images/300/DVDdatasource.gif\" alt=\"DVDdatasource\" title=\"HODBC\" /></p>\n</div>"}]},"apps":[],"jobName":"paragraph_1504646601806_1813430998","id":"20170731-202416_1602004865","dateCreated":"2017-09-05T21:23:21+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:326"},{"text":"%md\n# Tip - Viewing the queries issued by DVD\n\nRun the following shell paragraph to see the recent SQL commands sent to the Hive Server. ","user":"anonymous","dateUpdated":"2017-09-11T18:47:15+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"markdown","editOnDblClick":"true"},"editorMode":"ace/mode/markdown","editorHide":true,"tableHide":false},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1505155588384_-2028371540","id":"20170911-184628_727273517","dateCreated":"2017-09-11T18:46:28+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:825","dateFinished":"2017-09-11T18:47:15+0000","dateStarted":"2017-09-11T18:47:15+0000","results":{"code":"SUCCESS","msg":[{"type":"HTML","data":"<div class=\"markdown-body\">\n<h1>Tip - Viewing the queries issued by DVD</h1>\n<p>Run the following shell paragraph to see the recent SQL commands sent to the Hive Server.</p>\n</div>"}]}},{"text":"%sh\ngrep \"Parsing command\" /data/var/log/hive/hiveserver2.log\n","user":"anonymous","dateUpdated":"2017-09-11T18:48:23+0000","config":{"colWidth":12,"enabled":true,"results":{},"editorSetting":{"language":"sh","editOnDblClick":"false"},"editorMode":"ace/mode/sh","editorHide":false,"tableHide":false,"title":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1505155639030_-1089740754","id":"20170911-184719_1445882523","dateCreated":"2017-09-11T18:47:19+0000","status":"FINISHED","progressUpdateIntervalMs":500,"focus":true,"$$hashKey":"object:909","dateFinished":"2017-09-11T18:47:45+0000","dateStarted":"2017-09-11T18:47:45+0000","errorMessage":"","title":"Shell command to see the recent SQL sent to Hive Server"},{"dateUpdated":"2017-09-05T21:23:21+0000","config":{"editorSetting":{"language":"scala"},"colWidth":12,"editorMode":"ace/mode/scala","results":{},"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"apps":[],"jobName":"paragraph_1504646601807_1813046250","id":"20170504-171816_753503470","dateCreated":"2017-09-05T21:23:21+0000","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:327"}],"name":"xtra Connecting DV Desktop and Hive","id":"2CT2U672B","angularObjects":{"2CUR9TKC3:shared_process":[],"2CV6GZ6KY:shared_process":[],"2CRXRKTZS:shared_process":[],"2CUEWBE5C:shared_process":[],"2CUNV7BVE:shared_process":[],"2CRQ5UM9P:shared_process":[],"2CRHKT1V7:shared_process":[],"2C4U48MY3_spark2:shared_process":[]},"config":{"looknfeel":"default","personalizedMode":"false"},"info":{}}