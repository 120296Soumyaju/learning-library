{"paragraphs":[{"text":"%md\n# Demonstration: Citi Bike New York - Download Data\n\nThis tutorial was built for BDCS-CE version 17.2.5. If you are using a later version of BDCS-CE, please look for a newer version of this tutorial notebook at <https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake> . Questions and feedback about the tutorial: david.bayard@oracle.com\n\n## Contents\n+ About Citi Bike New York City\n+ Downloading data and storing in the Object Store\n+ Next Steps\n\nAs a reminder, the documentation for BDCS-CE can be found here: <http://docs.oracle.com/cloud/latest/big-data-compute-cloud/index.html>","authenticationInfo":{},"dateUpdated":"Jun 12, 2017 9:10:30 AM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1497039549386_1368074210","id":"20170414-131903_889251720","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>Demonstration: Citi Bike New York - Download Data</h1>\n<p>This tutorial was built for BDCS-CE version 17.2.5. If you are using a later version of BDCS-CE, please look for a newer version of this tutorial notebook at <a href=\"https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake\">https://github.com/oracle/learning-library/tree/master/workshops/journey2-new-data-lake</a> . Questions and feedback about the tutorial: david.bayard@oracle.com</p>\n<h2>Contents</h2>\n<ul>\n<li>About Citi Bike New York City</li>\n<li>Downloading data and storing in the Object Store</li>\n<li>Next Steps</li>\n</ul>\n<p>As a reminder, the documentation for BDCS-CE can be found here: <a href=\"http://docs.oracle.com/cloud/latest/big-data-compute-cloud/index.html\">http://docs.oracle.com/cloud/latest/big-data-compute-cloud/index.html</a></p>\n"},"dateCreated":"Jun 9, 2017 4:19:09 PM","dateStarted":"Jun 9, 2017 5:12:19 PM","dateFinished":"Jun 9, 2017 5:12:19 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:199"},{"text":"%md\n#About Citi Bike New York City\n\nThis demonstration uses bike ride data available from the New York City bike share program known as Citi Bike NYC.  Citi Bike consists of a fleet of bikes and a network of docking stations.  Bikes can be unlocked from one station and returned to any other.  Details about Citi Bike can be found here: <https://www.citibikenyc.com/>.\n\nParts of this demonstration are inspired by this analysis: <http://toddwschneider.com/posts/a-tale-of-twenty-two-million-citi-bikes-analyzing-the-nyc-bike-share-system/>\n\n\n\n","authenticationInfo":{},"dateUpdated":"Jun 13, 2017 7:42:31 AM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1497039549387_1367689461","id":"20170414-131917_125800834","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>About Citi Bike New York City</h1>\n<p>This demonstration uses bike ride data available from the New York City bike share program known as Citi Bike NYC.  Citi Bike consists of a fleet of bikes and a network of docking stations.  Bikes can be unlocked from one station and returned to any other.  Details about Citi Bike can be found here: <a href=\"https://www.citibikenyc.com/\">https://www.citibikenyc.com/</a>.</p>\n<p>Parts of this demonstration are inspired by this analysis: <a href=\"http://toddwschneider.com/posts/a-tale-of-twenty-two-million-citi-bikes-analyzing-the-nyc-bike-share-system/\">http://toddwschneider.com/posts/a-tale-of-twenty-two-million-citi-bikes-analyzing-the-nyc-bike-share-system/</a></p>\n"},"dateCreated":"Jun 9, 2017 4:19:09 PM","dateStarted":"Jun 13, 2017 7:42:28 AM","dateFinished":"Jun 13, 2017 7:42:28 AM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:200"},{"text":"%md\n#Downloading data and Storing in Object Store\n\nThe first step will be to download a month of data.  We will get our data from <https://www.citibikenyc.com/system-data>.  By default, we will grab data for December 2016.\n\nOnce the data is downloaded, we will unzip it.  Finally, we will store the unzipped data into a container in Object Store.  The container does not need to exist-- the code will create it if needed.  By default, the container will be named \"citibike\".\n\nWith BDCS-CE, you can choose to store your data in HDFS and/or the Object Store.  With this tutorial, we will show how to use the very scalable and economical Object Store to store our data.  More details about the Object Store are available in the \"Working with the Object Store\" tutorial. \n\n","authenticationInfo":{},"dateUpdated":"Jun 13, 2017 7:46:26 AM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1497039549387_1367689461","id":"20170417-082204_1964276013","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>Downloading data and Storing in Object Store</h1>\n<p>The first step will be to download a month of data.  We will get our data from <a href=\"https://www.citibikenyc.com/system-data\">https://www.citibikenyc.com/system-data</a>.  By default, we will grab data for December 2016.</p>\n<p>Once the data is downloaded, we will unzip it.  Finally, we will store the unzipped data into a container in Object Store.  The container does not need to exist&ndash; the code will create it if needed.  By default, the container will be named &ldquo;citibike&rdquo;.</p>\n<p>With BDCS-CE, you can choose to store your data in HDFS and/or the Object Store.  With this tutorial, we will show how to use the very scalable and economical Object Store to store our data.  More details about the Object Store are available in the &ldquo;Working with the Object Store&rdquo; tutorial.</p>\n"},"dateCreated":"Jun 9, 2017 4:19:09 PM","dateStarted":"Jun 13, 2017 7:46:23 AM","dateFinished":"Jun 13, 2017 7:46:23 AM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:201"},{"title":"Shell commands to download data and copy a File to Object Storage","text":"%sh\n\nCONTAINER=citibike\nFILENAME=201612-citibike-tripdata\n\n\necho \"Object Storage Container Name        :\" $CONTAINER\necho \"Data Set name (remove .zip or .csv)  :\" $FILENAME\necho \"-----------------------------------------------------------------\"\n\ntest -e $CONTAINER || mkdir $CONTAINER\ncd $CONTAINER\nrm $FILENAME*\n\necho \"Downloading $FILENAME.zip.  This may take a few minutes.\"\n# https://www.citibikenyc.com/system-data links us to https://s3.amazonaws.com/tripdata/\nwget https://s3.amazonaws.com/tripdata/$FILENAME.zip \necho \"Extracting the csv from the zip file\"\nunzip $FILENAME.zip\nhead -3 $FILENAME.csv\necho \"Creating a _nh.csv version of the file without header information\"\nsed '1d' $FILENAME.csv > $FILENAME_nh.csv\nls -l\n\necho \"Storing both versions of the csv files to Object Storage.  This may take a few minutes.\"\n# we use the hadoop swift:// driver to interact with the Object Store.\n# The .default configuration of the swift driver is the object store connection you defined when you created the BDCSCE instance.\nhadoop fs -rm -r swift://$CONTAINER.default/ 2>&1\nhadoop fs -ls swift://$CONTAINER.default/ 2>&1\nhadoop fs -mkdir swift://$CONTAINER.default/ 2>&1\nhadoop fs -put $FILENAME.csv swift://$CONTAINER.default/$FILENAME.csv 2>&1\nhadoop fs -put $FILENAME_nh.csv swift://$CONTAINER.default/$FILENAME_nh.csv 2>&1\necho \"Validating the 2 csv files got copied to Object Store (you should see 2 .csv files)\"\nhadoop fs -ls swift://$CONTAINER.default/ 2>&1\n\necho \"done\"","authenticationInfo":{},"dateUpdated":"Jun 16, 2017 1:35:31 PM","config":{"tableHide":false,"colWidth":12,"editorMode":"ace/mode/sh","editorHide":false,"title":true,"graph":{"mode":"table","height":424,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{"container":"dcb-bdcs-apr12","CONTAINER":"citibike","FILENAME":"201612-citibike-tripdata","datafile":"","FILENAME%%.*":""},"forms":{}},"jobName":"paragraph_1497039549387_1367689461","id":"20170417-082204_2139066596","dateCreated":"Jun 9, 2017 4:19:09 PM","dateStarted":"Jun 14, 2017 4:28:43 PM","dateFinished":"Jun 14, 2017 4:30:59 PM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:202","errorMessage":"","focus":true},{"text":"%md\n#Next Steps\n\nSo far, we have downloaded a Citi Bike data zip and created csv files. Then we stored the data into an Object Storage container. \n\nIn the next part of the Demo, we set up a Hive and Spark tables using the CSV files\n\n\n","authenticationInfo":{},"dateUpdated":"Jun 13, 2017 7:38:52 AM","config":{"colWidth":12,"editorMode":"ace/mode/markdown","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1497039549388_1365765717","id":"20170417-103925_248941849","result":{"code":"SUCCESS","type":"HTML","msg":"<h1>Next Steps</h1>\n<p>So far, we have downloaded a Citi Bike data zip and created csv files. Then we stored the data into an Object Storage container.</p>\n<p>In the next part of the Demo, we set up a Hive and Spark tables using the CSV files</p>\n"},"dateCreated":"Jun 9, 2017 4:19:09 PM","dateStarted":"Jun 13, 2017 7:38:50 AM","dateFinished":"Jun 13, 2017 7:38:50 AM","status":"FINISHED","progressUpdateIntervalMs":500,"$$hashKey":"object:203"},{"dateUpdated":"Jun 9, 2017 4:19:09 PM","config":{"colWidth":12,"editorMode":"ace/mode/scala","editorHide":true,"graph":{"mode":"table","height":300,"optionOpen":false,"keys":[],"values":[],"groups":[],"scatter":{}},"enabled":true},"settings":{"params":{},"forms":{}},"jobName":"paragraph_1497039549388_1365765717","id":"20170503-195744_526374432","result":{"code":"SUCCESS","type":"TEXT","msg":""},"dateCreated":"Jun 9, 2017 4:19:09 PM","status":"READY","errorMessage":"","progressUpdateIntervalMs":500,"$$hashKey":"object:204"}],"name":" Tutorial 3 Citi Bike New York Introduction and Setup","id":"2CN4YTHJ8","angularObjects":{"2CKYUH771":[],"2CHQCE7WB":[],"2CM73VNZC":[],"2CJ9M7X3E":[],"2CM9MFPDC":[],"2CKUFFGB5":[],"2CH76629W":[],"2CJ6JMU49":[],"2CMM8Y2GW":[]},"config":{"looknfeel":"default"},"info":{}}