{
  "builders": [
    {
      "user_ocid":"ocid1.user.oc1..aaaaaaaapjhoepwrsfnwxsk6fztrogtmz2mlqp6nz6jgkbdt2xv4t5xnn5hq",
      "tenancy_ocid": "ocid1.tenancy.oc1..aaaaaaaa74wp4expt3ltekxhzy5wa4nymgtpbcn6dgwogqprkgxq57uqfslq",
      "fingerprint":"c6:2b:d6:c7:54:81:23:c3:7c:81:f9:41:e6:bc:8e:1a",
      "availability_domain": "XtVI:US-ASHBURN-AD-1",
      "region": "us-ashburn-1",
      "base_image_ocid": "ocid1.image.oc1.iad.aaaaaaaa32bqorauh2x6ddnsukmmxrqfudmvtqpopn3uixcu235qmecxis2q",
      "compartment_ocid": "ocid1.compartment.oc1..aaaaaaaakyxvmnotwlokb6rcvhr4bee2kw4ez2hxvlxhk2rrmnobbp24vksa",
      "subnet_ocid": "ocid1.subnet.oc1.iad.aaaaaaaalwujcwbiceuirxw5rqvsmzhdy4i34xn7zvknaaedponwcvnpf74q",
      "image_name": "demo-lab-kubernetes",
      "shape": "VM.Standard1.1",
      "ssh_username": "ubuntu",
      "ssh_password": "welcome1",
      "key_file":"./keys/oci_api_key.pem",
      "type": "oracle-oci"
    }
  ],
  "provisioners": [
    {
      "type": "file",
      "source": "rc.local",
      "destination": "/home/ubuntu/rc.local"
    },
    {
      "type": "file",
      "source": "minikube-cache.tar.gz",
      "destination": "/home/ubuntu/minikube-cache.tar.gz"
    },
    {
      "type": "file",
      "source": "minikube-start.sh",
      "destination": "/home/ubuntu/minikube-start.sh"
    },
    {
      "type": "file",
      "source": "minikube-stop.sh",
      "destination": "/home/ubuntu/minikube-stop.sh"
    },
    {
      "type": "file",
      "source": "web",
      "destination": "/home/ubuntu"
    },
    {
      "type": "shell",
      "inline": [
        "sleep 30",
        "sudo apt-get update",
        "sudo apt-get install -y git xclip vnc4server docker.io nginx",
        "sudo -u root wget https://kubernetes-helm.storage.googleapis.com/helm-v2.8.1-linux-amd64.tar.gz",
        "sudo -u root tar -zxvf ./helm-v2.8.1-linux-amd64.tar.gz",
        "sudo -u root mv linux-amd64/helm /usr/local/bin",
        "sudo -u root curl -LSs https://raw.githubusercontent.com/fnproject/cli/master/install | sh",
        "sudo curl -Lo minikube https://storage.googleapis.com/minikube/releases/latest/minikube-linux-amd64 && sudo chmod +x minikube && sudo mv minikube /usr/local/bin/",
        "sudo curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/v1.10.0/bin/linux/amd64/kubectl && sudo chmod +x kubectl && sudo mv kubectl /usr/local/bin/",
        "sudo curl -LO https://storage.googleapis.com/minikube/releases/latest/docker-machine-driver-kvm2 && sudo chmod +x docker-machine-driver-kvm2 && sudo mv docker-machine-driver-kvm2 /usr/local/bin/",
        "tar -zxvf minikube-cache.tar.gz",
        "sudo mv /home/ubuntu/rc.local /etc/rc.local && sudo chmod 777 /etc/rc.local",
        "sudo su -c 'mkdir /home/ubuntu/.minikube' ubuntu && sudo cp -r /home/ubuntu/cache /home/ubuntu/.minikube/cache",
        "sudo chmod +x /home/ubuntu/minikube-*.sh"

      ]
    }
  ]
}
